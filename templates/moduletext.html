{% extends 'index.html' %}

{% block stylesheets %}
    <!--dropzone-->
    <link href="/css/dropzone.css" rel="stylesheet">

    <!--common style-->
    <link href="/css/style.css" rel="stylesheet">
    <link href="/css/style-responsive.css" rel="stylesheet">


    <!--Data Table-->
    <link href="/js/data-table/css/jquery.dataTables.css" rel="stylesheet">
    <link href="/js/data-table/css/dataTables.tableTools.css" rel="stylesheet">
    <link href="/js/data-table/css/dataTables.colVis.min.css" rel="stylesheet">
    <link href="/js/data-table/css/dataTables.responsive.css" rel="stylesheet">
    <link href="/js/data-table/css/dataTables.scroller.css" rel="stylesheet">





    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/js/html5shiv.js"></script>
    <script src="/js/respond.min.js"></script>
    <![endif]-->


{% endblock %}

{% block page_head %}

{% endblock %}

{% block main_content %}
    <!-- page head start-->
    <div class="page-head">
        <h3 class="m-b-less">
            业务模块
        </h3>
        <!--<span class="sub-title">Welcome to Static Table</span>-->
        <div class="state-information">
            <ol class="breadcrumb m-b-less bg-less">
                <li><a href="#">首页</a></li>
                <li><a href="#">业务模块</a></li>
                <li class="active">业务列表</li>
            </ol>
        </div>
    </div>
    <!-- page head end-->
            <!--body wrapper start-->
            <div class="wrapper">
                <div class="row">
                    <div class="col-sm-12">
                        <section class="panel">
                            <header class="panel-heading ">
                                <td class="hidden-xs">
                            <a data-toggle="modal" data-target="#addmodule" class="btn btn-success btn-xs" >添加模块</a>
                            <!-- Modal -->
                            <div class="modal fade" id="addmodule" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                            <h4 class="modal-title">文件管理</h4>
                                        </div>
                                        <div class="modal-body">
                                            <div class="wrapper">
                                                <div class="row">
                                                    <section class="panel">
                                                        <header class="panel-heading">
                                                            文件管理
                                                        </header>
                                                        <form action="{{ url_for('BSmodule.post_module') }}" method="post" class="form-horizontal"  role="form" >
                                                            <div class="form-group">
                                                                <label for="servername" class="col-lg-3 col-sm-3 control-label">服务名称</label>
                                                                <div class="col-lg-4">
                                                                    <input type="text" class="form-control" id="servername" name="servername" placeholder="">
                                                                    <input type="hidden" class="form-control" id="mode" name="mode" value="add" >
                                                                    <p class="help-block"></p>
                                                                </div>


                                                            </div>
                                                            <div class="form-group">
                                                                <label for="insideip" class="col-lg-3 col-sm-3 control-label">内网ip</label>
                                                                <div class="col-lg-4">
                                                                    <input type="text" class="form-control" id="insideip" name="insideip" placeholder="1.1.1.1,2.2.2.2">
                                                                    <p class="help-block"></p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="insideport" class="col-lg-3 col-sm-3 control-label">内网端口</label>
                                                                <div class="col-lg-4">
                                                                    <input type="text" class="form-control" id="insideport" name="insideport" placeholder="80,443">
                                                                    <p class="help-block"></p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="outsideip" class="col-lg-3 col-sm-3 control-label">外网ip</label>
                                                                <div class="col-lg-4">
                                                                    <input type="text" class="form-control" id="outsideip" name="outsideip" placeholder="1.1.1.1,2.2.2.2">
                                                                    <p class="help-block"></p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="outsideport" class="col-lg-3 col-sm-3 control-label">外网端口</label>
                                                                <div class="col-lg-4">
                                                                    <input type="text" class="form-control" id="outsideport" name="outsideport" placeholder="80,443">
                                                                    <p class="help-block"></p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label class="col-sm-3 control-label col-lg-3" for="area">域</label>
                                                                <div class="col-lg-4">
                                                                    <select class="form-control m-b-10" id="area" name="area">
                                                                        <option></option>
                                                                        <option>CUTV</option>
                                                                        <option>IDC</option>
                                                                        <option>云平台</option>
                                                                        <option>其他</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        <div class="form-group">
                                                            <div class="col-lg-offset-3 col-lg-10">
                                                                <button type="submit" class="btn btn-primary">提交</button>
                                                                <input type="reset" class="btn btn-default" value="重置">
                                                            </div>
                                                        </div>
                                                    </form>
                                                    </section>
                                                </div>


                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- modal -->
                            </td>
                                <span class="tools pull-right">
                                    <a class="fa fa-repeat box-refresh" href="javascript:;"></a>
                                    <a class="t-close fa fa-times" href="javascript:;"></a>
                                </span>
                            </header>
                            <table class="table colvis-data-table data-table">
                            <thead>
                            <tr>
                                <th hidden>Num</th>
                                <th>服务名称</th>
                                <th>内网IP</th>
                                <th>内网端口</th>
                                <th>公网IP</th>
                                <th>公网出口</th>
                                <th>域</th>
                                <th>设置</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for mod in mods %}
                            <tr>
                                <td hidden>{{ mod[0] }}</td>
                                <td valign="middle">{{ mod[1] }}</td>
                                <td valign="middle">
                                    {% for ip in mod[2].split(',') %}
                                        <p>{{ ip }}</p>
                                    {% endfor %}</td>
                                <td valign="middle">{{ mod[3] }}</td>
                                <td>
                                    {% for ip in mod[4].split(',') %}
                                        <p>{{ ip }}</p>
                                    {% endfor %}
                                </td>
                                <td valign="middle">{{ mod[5] }}</td>
                                <td valign="middle">{{ mod[6] }}</td>
                                <td>
                                    <a data-toggle="modal" data-target="#updatemodule{{ mod[0] }}" class="btn btn-primary btn-xs" ><i class="fa fa-pencil"></i></a>
                                    <a href="{{ url_for('BSmodule.post_module',mode = 'delete',rowid=mod[0]) }}" class="btn btn-danger btn-xs"><i class="fa fa-trash-o"></i></a>
                                    <!-- Modal -->
                                    <div class="modal fade" id="updatemodule{{ mod[0] }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                            <h4 class="modal-title">模块管理</h4>
                                        </div>
                                        <div class="modal-body">
                                            <div class="wrapper">
                                                <div class="row">
                                                    <section class="panel">
                                                        <header class="panel-heading">
                                                            模块修改#{{ mod[0] }}
                                                        </header>
                                                        <form action="{{ url_for('BSmodule.post_module') }}" method="post" class="form-horizontal"  role="form" >
                                                            <div class="form-group">
                                                                <label for="servername" class="col-lg-3 col-sm-3 control-label">服务名称</label>
                                                                <div class="col-lg-4">
                                                                    <input type="text" class="form-control" id="servername" name="servername" placeholder="" value="{{ mod[1] }}">
                                                                    <input type="hidden" class="form-control" id="mode" name="mode" value="update">
                                                                    <input type="hidden" class="form-control" id="rowid" name="rowid" value="{{ mod[0] }}">
                                                                    <p class="help-block"></p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="insideip" class="col-lg-3 col-sm-3 control-label">内网ip</label>
                                                                <div class="col-lg-4">
                                                                    <input type="text" class="form-control" id="insideip" name="insideip" placeholder="1.1.1.1,2.2.2.2" value="{{ mod[2] }}">
                                                                    <p class="help-block"></p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="insideport" class="col-lg-3 col-sm-3 control-label">内网端口</label>
                                                                <div class="col-lg-4">
                                                                    <input type="text" class="form-control" id="insideport" name="insideport" placeholder="80,443" value="{{ mod[3] }}">
                                                                    <p class="help-block"></p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="outsideip" class="col-lg-3 col-sm-3 control-label">外网ip</label>
                                                                <div class="col-lg-4">
                                                                    <input type="text" class="form-control" id="outsideip" name="outsideip" placeholder="1.1.1.1,2.2.2.2" value="{{ mod[4] }}">
                                                                    <p class="help-block"></p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="outsideport" class="col-lg-3 col-sm-3 control-label">外网端口</label>
                                                                <div class="col-lg-4">
                                                                    <input type="text" class="form-control" id="outsideport" name="outsideport" placeholder="80,443" value="{{ mod[5] }}">
                                                                    <p class="help-block"></p>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label class="col-sm-3 control-label col-lg-3" for="area">域</label>
                                                                <div class="col-lg-4">
                                                                    <select class="form-control m-b-10" id="area" name="area">
                                                                        <option select="select">{{ mod[6] }}</option>
                                                                        <option>CUTV</option>
                                                                        <option>IDC</option>
                                                                        <option>云平台</option>
                                                                        <option>其他</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        <div class="form-group">
                                                            <div class="col-lg-offset-3 col-lg-10">
                                                                <button type="submit" class="btn btn-primary">提交</button>
                                                            </div>
                                                        </div>
                                                    </form>
                                                    </section>
                                                </div>


                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </td>
                            </tr>
                            {% endfor %}
                            </tbody>
                            </table>
                        </section>
                    </div>
                </div>
            </div>
            <!--body wrapper end-->



{% endblock %}

{% block scritps %}
<script src="/js/jquery-1.10.2.min.js"></script>
<script src="/js/jquery-migrate.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/modernizr.min.js"></script>


<!--Nice Scroll-->
<script src="/js/jquery.nicescroll.js" type="text/javascript"></script>
<!--dropzone-->
<script src="/js/dropzone.js"></script>
<!--common scripts for all pages-->

<!--Data Table-->
<script src="/js/data-table/js/jquery.dataTables.min.js"></script>
<script src="/js/data-table/js/dataTables.tableTools.min.js"></script>
<script src="/js/data-table/js/bootstrap-dataTable.js"></script>
<script src="/js/data-table/js/dataTables.colVis.min.js"></script>
<script src="/js/data-table/js/dataTables.responsive.min.js"></script>
<script src="/js/data-table/js/dataTables.scroller.min.js"></script>
<!--data table init-->
<script src="/js/data-table-init.js"></script>






{% endblock %}