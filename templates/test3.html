{% extends 'index.html' %}


{% block stylesheets %}
<!--right slidebar-->
    <link href="/css/slidebars.css" rel="stylesheet">

    <!--switchery-->
    <link href="/js/switchery/switchery.min.css" rel="stylesheet" type="text/css" media="screen" />

    <!--Morris Chart -->
    <link rel="stylesheet" href="/js/morris-chart/morris.css">

    <!--common style-->
    <link href="/css/style.css" rel="stylesheet">
    <link href="/css/style-responsive.css" rel="stylesheet">

    {#  chartkick  #}
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/heatmap.js"></script>
    <script src="https://code.highcharts.com/modules/treemap.js"></script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/js/html5shiv.js"></script>
    <script src="/js/respond.min.js"></script>
    <![endif]-->
{% endblock %}

{% block page_head %}
<!-- page head start-->
            <div class="page-head">
                <h3 class="m-b-less">
                    表单查询
                </h3>
                <!--<span class="sub-title">Welcome to Static Table</span>-->
                <div class="state-information">
                    <ol class="breadcrumb m-b-less bg-less">
                        <li><a href="#">首页</a></li>
                        <li><a href="#">图表查询</a></li>
                        <li class="active">表单查询</li>
                    </ol>
                </div>
            </div>
            <!-- page head end-->
{% endblock %}

{% block main_content %}
<!--body wrapper start-->

            <div class="wrapper">

                <div class="row">
                    <div class="col-md-12">
                        <section class="panel" >
                            <header class="panel-heading">
                                CDN支出
                                <span class="tools pull-right">
                                    <a class="fa fa-repeat box-refresh" href="javascript:;"></a>
                                    <a class="t-collapse fa fa-chevron-down" href="javascript:;"></a>
                                    <a class="t-close fa fa-times" href="javascript:;"></a>
                                </span>
                            </header>
                            <div class="panel-body">
                                <div id="container"></div>
                            </div>

                        </section>
                    </div>



                </div>



            </div>

    <script>
    var data = {
        '听云测试': {
            'APP': {
                'sa':{
                    'Communicable & other Group I': '89',
                    'Injuries': '89',
                    'Noncommunicable diseases': '89'
                },
            },
        },
        'Europe': {
            'Hungary': {
                'Communicable & other Group I': '16.8',
                'Noncommunicable diseases': '602.8',
                'Injuries': '44.3'
            },
        }
    },
    points = [],
    regionP,
    regionVal,
    regionI = 0,
    countryP,
    countryI,
    causeP,
    causeI,
    region,
    country,
    cause,
    causeName = {
        'Communicable & other Group I': 'Communicable diseases',
        'Noncommunicable diseases': 'Non-communicable diseases',
        'Injuries': 'Injuries'
    };

for (region in data) {
    if (data.hasOwnProperty(region)) {
        regionVal = 0;
        regionP = {
            id: 'id_' + regionI,
            name: region,
            color: Highcharts.getOptions().colors[regionI]
        };
        countryI = 0;
        for (country in data[region]) {
            if (data[region].hasOwnProperty(country)) {
                countryP = {
                    id: regionP.id + '_' + countryI,
                    name: country,
                    parent: regionP.id
                };
                points.push(countryP);
                causeI = 0;
                for (cause in data[region][country]) {
                    if (data[region][country].hasOwnProperty(cause)) {
                        causeP = {
                            id: countryP.id + '_' + causeI,
                            name: causeName[cause],
                            parent: countryP.id,
                            value: Math.round(+data[region][country][cause])
                        };
                        regionVal += causeP.value;
                        points.push(causeP);
                        causeI = causeI + 1;
                    }
                }
                countryI = countryI + 1;
            }
        }
        regionP.value = Math.round(regionVal / countryI);
        points.push(regionP);
        regionI = regionI + 1;
    }
}
Highcharts.chart('container', {
    series: [{
        type: 'treemap',
        layoutAlgorithm: 'squarified',
        allowDrillToNode: true,
        animationLimit: 1000,
        dataLabels: {
            enabled: false
        },
        levelIsConstant: false,
        levels: [{
            level: 1,
            dataLabels: {
                enabled: true
            },
            borderWidth: 3
        }],
        data: points
    }],
    subtitle: {
        text: 'Click points to drill down. Source: <a href="http://apps.who.int/gho/data/node.main.12?lang=en">WHO</a>.'
    },
    title: {
        text: 'Global Mortality Rate 2012, per 100 000 population'
    }
});
    </script>

<!--body wrapper end-->
{% endblock %}

{% block scritps %}
<!-- Placed js at the end of the document so the pages load faster -->
<script src="/js/jquery-1.10.2.min.js"></script>
<script src="/js/jquery-migrate.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/modernizr.min.js"></script>

<!--Nice Scroll-->
<script src="/js/jquery.nicescroll.js" type="text/javascript"></script>

<!--right slidebar-->
<script src="/js/slidebars.min.js"></script>

<!--switchery-->
<script src="/js/switchery/switchery.min.js"></script>
<script src="/js/switchery/switchery-init.js"></script>

<!--Sparkline Chart-->
<script src="/js/sparkline/jquery.sparkline.js"></script>
<script src="/js/sparkline/sparkline-init.js"></script>

<!--Morris Chart-->
<script src="/js/morris-chart/morris.js"></script>
<script src="/js/morris-chart/raphael-min.js"></script>

<!--morris chart initialization-->
<script src="/js/morris-init.js"></script>


{% endblock %}